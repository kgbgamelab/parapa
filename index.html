<!DOCTYPE html>
<html lang="ru">
<head>
<style>
  :root {
    --scene-height: 500px;
    /* Укажи здесь скорость для всей сцены */
    --base-speed: 20s; 
  }

  body { margin: 0; background: #050011; }

  .viewport {
    position: relative;
    width: 100%;
    height: var(--scene-height);
    overflow: hidden;
    border-bottom: 5px solid #ff00cc; /* Неоновая линия дороги */
  }

  .layer {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-repeat: repeat-x;
    background-size: auto 100%;
    /* Включаем аппаратное ускорение */
    transform: translateZ(0);
  }

  /* 1. НЕБО (движется очень медленно) */
  .sky {
    background-image: url('sky.png');
    animation: move-parallax var(--base-speed) linear infinite;
    animation-duration: calc(var(--base-speed) * 10); 
    z-index: 1;
  }

  /* 2. ГОРОД (средняя скорость) */
  .city {
    background-image: url('city.png');
    animation: move-parallax var(--base-speed) linear infinite;
    animation-duration: calc(var(--base-speed) * 3);
    z-index: 2;
  }

  /* 3. ПЕРИЛА / ДОРОГА (самый быстрый слой) */
  .foreground {
    background-image: url('rail.png');
    animation: move-parallax var(--base-speed) linear infinite;
    z-index: 3;
  }

  /* Общая анимация смещения фона */
  @keyframes move-parallax {
    from { background-position: 0 0; }
    to { background-position: -2000px 0; } /* Число должно быть кратно ширине картинки для бесшовности */
  }
</style>
</head>
<body>

<div class="viewport">
  <div class="layer sky"></div>
  <div class="layer city"></div>
  <div class="layer foreground"></div>
</div>

</body>
</html>
